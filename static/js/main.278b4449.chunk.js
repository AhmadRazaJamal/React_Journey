(this["webpackJsonpreact-journey"]=this["webpackJsonpreact-journey"]||[]).push([[0],{61:function(e,t,a){e.exports=a(92)},66:function(e,t,a){},87:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),i=(a(66),a(33)),l=a.n(i),s=a(48),u=a(13),m=a(24),d=a(49),f=a.n(d),p=a(27),E=a(54),h=a.n(E),y=a(126),v=a(125),g=a(121),S=a(55),b=a.n(S);a(87);a.p;var O=Object(g.a)((function(e){return{input:{width:"80%",fontfamily:"Lato",fontSize:"18px"},searchButton:{background:"white",color:"black",fontSize:"18px",fontFamily:"Lato","&:hover":{color:"white",background:"black"}},filterButton:{color:"black",fontFamily:"Lato","&:hover":{color:"white",background:"black",border:"1px white solid"}}}})),I=function(e,t){return"".concat("https://hn.algolia.com/api/v1/").concat("/search","?").concat("query=").concat(e,"&").concat("page=").concat(t)},T=function(e){return e.substring(e.lastIndexOf("?")+1,e.lastIndexOf("&")).replace("query=","")},w={NONE:function(e){return e},TITLE:function(e){return Object(p.sortBy)(e,"title")},AUTHOR:function(e){return Object(p.sortBy)(e,"author")},COMMENTS:function(e){return Object(p.sortBy)(e,"num_comments").reverse()},POINTS:function(e){return Object(p.sortBy)(e,"points").reverse()}},R=function(e,t){switch(t.type){case"STORIES_FETCH_INIT":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0,isError:!1});case"STORIES_FETCH_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,isError:!1,data:0===t.payload.page?t.payload.list:e.data.concat(t.payload.list),page:t.payload.page});case"STORIES_FETCH_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,isError:!0});case"REMOVE_STORY":return Object(u.a)(Object(u.a)({},e),{},{data:e.data.filter((function(e){return t.payload.objectID!==e.objectID}))});default:throw new Error}},C=function(e){var t=e.lastSearches,a=e.onLastSearch;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement(y.a,{key:e+t,type:"button",variant:"contained",color:"primary",style:{marginLeft:"15px"},onClick:function(){return a(e)}},e)})))},j=function(e){var t=e.searchTerm,a=e.onSearchInput,n=e.onSearchSubmit,c=O();return r.a.createElement("form",{onSubmit:n,className:"search-form"},r.a.createElement(k,{id:"search",value:t,isFocused:!0,onInputChange:a}),r.a.createElement(y.a,{type:"submit",variant:"contained",disabled:!t,className:c.searchButton,style:{marginLeft:"1%",padding:"1% 4%",width:"20%"},size:"large",startIcon:r.a.createElement(h.a,null)},"Submit"))},k=function(e){var t=e.id,a=e.value,n=e.type,c=void 0===n?"text":n,o=e.onInputChange,i=e.isFocused,l=e.children,s=r.a.useRef();r.a.useEffect((function(){i&&s.current.focus()}),[i]);var u=O();return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:t,className:"label"},l),"\xa0",r.a.createElement(v.a,{ref:s,id:t,color:"primary",type:c,value:a,onChange:o,className:u.input,variant:"outlined",label:"Search Term"}))},N=function(e){var t=e.list,a=e.onRemoveItem,n=r.a.useState({sortKey:"NONE",isReverse:!1}),c=Object(m.a)(n,2),o=c[0],i=c[1],l=w[o.sortKey],s=o.isReverse?l(t):l(t).reverse(),u=O(),d=function(e){var t=o.sortKey===e&&!o.isReverse;i({sortKey:e,isReverse:t})};return r.a.createElement("div",null,r.a.createElement("div",{className:"list-header",style:{display:"flex"}},r.a.createElement("span",{style:{width:"44%"}},r.a.createElement(y.a,{variant:"outlined",className:u.filterButton,onClick:function(){return d("TITLE")}},"Title")),r.a.createElement("span",{style:{width:"30%"}},r.a.createElement(y.a,{variant:"outlined",className:u.filterButton,onClick:function(){return d("AUTHOR")}},"Author")),r.a.createElement("span",{style:{width:"16%"}},r.a.createElement(y.a,{variant:"outlined",className:u.filterButton,onClick:function(){return d("COMMENTS")}},"Comments")),r.a.createElement("span",{style:{width:"13%"}},r.a.createElement(y.a,{variant:"outlined",className:u.filterButton,onClick:function(){return d("POINTS")}},"Points")),r.a.createElement("span",{style:{width:"10%",marginTop:"0.6%"}},"ACTIONS")),s.map((function(e){return r.a.createElement(L,{key:e.objectID,item:e,onRemoveItem:a})})))},L=function(e){var t=e.item,a=e.onRemoveItem;return r.a.createElement("div",{className:"item",style:{display:"flex"}},r.a.createElement("span",{style:{width:"40%",marginLeft:"0.8%"}},r.a.createElement("a",{href:t.url},t.title)),r.a.createElement("span",{style:{width:"30%",marginLeft:"1.2%"}},t.author),r.a.createElement("span",{style:{width:"10%"}},t.num_comments),r.a.createElement("span",{style:{width:"10%",marginLeft:"2.2%"}},t.points),r.a.createElement("span",{style:{width:"10%"}},r.a.createElement(y.a,{type:"Button",onClick:function(){return a(t)},variant:"contained",color:"secondary",startIcon:r.a.createElement(b.a,null)},"Delete")))},x=function(){var e=function(e,t){var a=r.a.useState(localStorage.getItem(e)||t),n=Object(m.a)(a,2),c=n[0],o=n[1];return r.a.useEffect((function(){localStorage.setItem(e,c)}),[c,e]),[c,o]}("search","React"),t=Object(m.a)(e,2),a=t[0],n=t[1],c=r.a.useState([I(a,0)]),o=Object(m.a)(c,2),i=o[0],u=o[1],d=r.a.useReducer(R,{data:[],page:0,isLoading:!1,isError:!1}),p=Object(m.a)(d,2),E=p[0],h=p[1],v=r.a.useCallback(Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h({type:"STORIES_FETCH_INIT"}),e.prev=1,t=i[i.length-1],e.next=5,f.a.get(t);case 5:a=e.sent,h({type:"STORIES_FETCH_SUCCESS",payload:{list:a.data.hits,page:a.data.page}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),h({type:"STORIES_FETCH_FAILURE"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),[i]);r.a.useEffect((function(){v()}),[v]);var g=function(e,t){var a=I(e,t);u(i.concat(a))},S=function(e){return e.reduce((function(e,t,a){var n=T(t);return 0===a?e.concat(n):n===e[e.length-1]?e:e.concat(n)}),[]).slice(-6).slice(0,-1)}(i);return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"headline-primary"},"My React Stories"),r.a.createElement(j,{searchTerm:a,onSearchInput:function(e){n(e.target.value)},onSearchSubmit:function(e){g(a,0),e.preventDefault()}}),r.a.createElement(C,{lastSearches:S,onLastSearch:function(e){n(e),g(e,0)}}),r.a.createElement("hr",null),E.isError&&r.a.createElement("p",null,"Something went wrong ..."),r.a.createElement(N,{list:E.data,onRemoveItem:function(e){h({type:"REMOVE_STORY",payload:e})}}),E.isLoading?r.a.createElement("p",null,"Loading ..."):r.a.createElement(y.a,{onClick:function(){var e=i[i.length-1],t=T(e);g(t,E.page+1)},style:{marginLeft:"auto",marginRight:"auto",marginTop:"25px",display:"block",padding:"10px 50px"},variant:"contained",color:"secondary"},"Show More"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[61,1,2]]]);
//# sourceMappingURL=main.278b4449.chunk.js.map